webpackJsonp([32],{506:function(n,s){n.exports={content:["article",["h2","\u4e00\u3001umi\u914d\u7f6e"],["pre",{lang:null,highlighted:'<span class="token keyword">const</span> resolve<span class="token operator">=</span><span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"path"</span><span class="token punctuation">)</span><span class="token punctuation">.</span>resolve<span class="token comment" spellcheck="true">;</span>\n<span class="token keyword">const</span> isDev <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>BUILD_ENV<span class="token comment" spellcheck="true">;</span>\nlet devtool <span class="token operator">=</span> isDev !<span class="token operator">==</span> <span class="token string">\'production\'</span> <span class="token operator">?</span> <span class="token string">"source-map"</span> <span class="token punctuation">:</span> <span class="token string">""</span><span class="token comment" spellcheck="true">;</span>\n<span class="token operator">/</span><span class="token operator">/</span> \u9879\u76ee\u7248\u672c\u914d\u7f6e\u6587\u4ef6\n<span class="token keyword">const</span> productVersion <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span>PRODUCT_VER<span class="token comment" spellcheck="true">;</span>\nlet verConfigSrc<span class="token comment" spellcheck="true">;</span>\n<span class="token keyword">if</span> <span class="token punctuation">(</span>productVersion<span class="token punctuation">)</span> {\n\tverConfigSrc <span class="token operator">=</span> <span class="token string">"./src/config/versionConfig/"</span><span class="token operator">+</span>productVersion<span class="token comment" spellcheck="true">;</span>\n} <span class="token keyword">else</span> {\n\tverConfigSrc <span class="token operator">=</span> <span class="token string">"./src/config/versionConfig/defaultVerConfig"</span><span class="token comment" spellcheck="true">;</span>\n}\nexport <span class="token keyword">default</span> {\n  history<span class="token punctuation">:</span><span class="token string">"hash"</span><span class="token punctuation">,</span>\n  publicPath<span class="token punctuation">:</span><span class="token string">\'./\'</span><span class="token punctuation">,</span>\n  theme<span class="token punctuation">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">\'./theme.config.js\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  proxy<span class="token punctuation">:</span> {\n    <span class="token string">\'/api/\'</span><span class="token punctuation">:</span> {\n\t\t\ttarget<span class="token punctuation">:</span> <span class="token string">\'http://172.18.169.19:8280/\'</span><span class="token punctuation">,</span>\n\t\t\tpathRewrite<span class="token punctuation">:</span> {\n\t\t\t\t<span class="token string">\'/api/\'</span><span class="token punctuation">:</span> <span class="token string">\'/member/api/\'</span>\n\t\t\t}<span class="token punctuation">,</span>\n\t\t\tchangeOrigin<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span> <span class="token operator">/</span><span class="token operator">/</span> <span class="token keyword">for</span> vhosted sites<span class="token punctuation">,</span> changes host header <span class="token keyword">to</span> match <span class="token keyword">to</span> target\'s host\n\t\t\tlogLevel<span class="token punctuation">:</span> <span class="token string">\'debug\'</span>\n\t\t}\n  }<span class="token punctuation">,</span>\n  devtool<span class="token punctuation">:</span> devtool<span class="token punctuation">,</span>\n  alias<span class="token punctuation">:</span> {\n    verConfig<span class="token punctuation">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> verConfigSrc<span class="token punctuation">)</span><span class="token punctuation">,</span>\n    themes<span class="token punctuation">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">\'./src/themes\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    layouts<span class="token punctuation">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">\'src/layouts\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    assest<span class="token punctuation">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">\'src/assest\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    common<span class="token punctuation">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">\'src/common\'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    components<span class="token punctuation">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"./src/components"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    utils<span class="token punctuation">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"./src/utils"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    services<span class="token punctuation">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"./src/services"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    models<span class="token punctuation">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"./src/models"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    config<span class="token punctuation">:</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"./src/config"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    pages<span class="token punctuation">:</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"./src/pages"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token string">\'sc-component\'</span><span class="token punctuation">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"./src/components"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n    <span class="token string">\'sc-util\'</span><span class="token punctuation">:</span> <span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">"./src/utils"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n  }<span class="token punctuation">,</span>\n  extraBabelPlugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>\n    <span class="token punctuation">[</span>\n      require<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token string">"babel-plugin-import"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n      {\n        <span class="token string">"libraryName"</span><span class="token punctuation">:</span> <span class="token string">"antd-mobile"</span><span class="token punctuation">,</span>\n        <span class="token string">"libraryDirectory"</span><span class="token punctuation">:</span> <span class="token string">"es"</span><span class="token punctuation">,</span>\n        <span class="token string">"style"</span><span class="token punctuation">:</span> <span class="token boolean">true</span>\n      }\n    <span class="token punctuation">]</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  plugins<span class="token punctuation">:</span> <span class="token punctuation">[</span>\n    <span class="token punctuation">[</span>\n      <span class="token string">\'umi-plugin-react\'</span><span class="token punctuation">,</span>\n      {\n        dynamicImport<span class="token punctuation">:</span> {\n          loadingComponent<span class="token punctuation">:</span> <span class="token string">"./components/PageLoading/index"</span><span class="token punctuation">,</span>\n          webpackChunkName<span class="token punctuation">:</span> <span class="token boolean">true</span>\n        }<span class="token punctuation">,</span>\n        dva<span class="token punctuation">:</span> {\n          hmr<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n        }<span class="token punctuation">,</span>\n        antd<span class="token punctuation">:</span><span class="token boolean">true</span><span class="token punctuation">,</span>\n        routes<span class="token punctuation">:</span> {\n          exclude<span class="token punctuation">:</span> <span class="token punctuation">[</span>\n            <span class="token operator">/</span>model\\<span class="token punctuation">.</span><span class="token punctuation">(</span>j|t<span class="token punctuation">)</span>sx<span class="token operator">?</span>$<span class="token operator">/</span><span class="token punctuation">,</span>\n            <span class="token operator">/</span>services\\<span class="token punctuation">.</span><span class="token punctuation">(</span>j|t<span class="token punctuation">)</span>sx<span class="token operator">?</span>$<span class="token operator">/</span><span class="token punctuation">,</span>\n            <span class="token operator">/</span>service\\<span class="token punctuation">.</span><span class="token punctuation">(</span>j|t<span class="token punctuation">)</span>sx<span class="token operator">?</span>$<span class="token operator">/</span><span class="token punctuation">,</span>\n            <span class="token operator">/</span>models\\<span class="token operator">/</span><span class="token operator">/</span><span class="token punctuation">,</span>\n            <span class="token operator">/</span>style\\<span class="token operator">/</span><span class="token operator">/</span><span class="token punctuation">,</span>\n            <span class="token operator">/</span>components\\<span class="token operator">/</span><span class="token operator">/</span><span class="token punctuation">,</span>\n            <span class="token operator">/</span>services\\<span class="token operator">/</span><span class="token operator">/</span><span class="token punctuation">,</span>\n            <span class="token operator">/</span>chart\\<span class="token operator">/</span>Container\\<span class="token punctuation">.</span>js$<span class="token operator">/</span><span class="token punctuation">,</span>\n          <span class="token punctuation">]</span><span class="token punctuation">,</span>\n        }<span class="token punctuation">,</span>\n        locale<span class="token punctuation">:</span> {\n          <span class="token operator">/</span><span class="token operator">/</span> <span class="token keyword">default</span> <span class="token boolean">false</span>\n          enable<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n          <span class="token operator">/</span><span class="token operator">/</span> <span class="token keyword">default</span> zh<span class="token operator">-</span>CN\n          <span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token string">\'zh-CN\'</span><span class="token punctuation">,</span>\n          <span class="token operator">/</span><span class="token operator">/</span> <span class="token keyword">default</span> <span class="token boolean">true</span><span class="token punctuation">,</span> when it is <span class="token boolean">true</span><span class="token punctuation">,</span> will use `navigator<span class="token punctuation">.</span>language` overwrite <span class="token keyword">default</span>\n          baseNavigator<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>\n        }<span class="token punctuation">,</span>\n      }\n    <span class="token punctuation">]</span><span class="token punctuation">,</span>\n    <span class="token operator">/</span><span class="token operator">*</span>    <span class="token punctuation">[</span>\n          <span class="token string">\'umi-plugin-dll\'</span><span class="token punctuation">,</span>\n          {\n            exclude<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">\'model\'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n            include<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">"dva"</span><span class="token punctuation">,</span> <span class="token string">"dva/router"</span><span class="token punctuation">,</span> <span class="token string">"dva/saga"</span><span class="token punctuation">,</span> <span class="token string">"dva/fetch"</span><span class="token punctuation">,</span> <span class="token string">"antd/es"</span><span class="token punctuation">,</span> <span class="token string">"sc-dva-antd-pro/es"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>\n          }<span class="token punctuation">,</span>\n        <span class="token punctuation">]</span><span class="token punctuation">,</span><span class="token operator">*</span><span class="token operator">/</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  chainWebpack<span class="token punctuation">:</span> config <span class="token operator">=</span><span class="token operator">></span> {\n    config<span class="token punctuation">.</span>module<span class="token punctuation">.</span><span class="token function">noParse</span><span class="token punctuation">(</span><span class="token operator">/</span>coordinate<span class="token operator">-</span>conver<span class="token operator">/</span><span class="token punctuation">)</span> <span class="token operator">/</span><span class="token operator">/</span>\u4e0d\u53bb\u89e3\u6790<span class="token operator">/</span>coordinate<span class="token operator">-</span>conver<span class="token operator">/</span>\u4e2d\u7684\u4f9d\u8d56\u5e93\n  }<span class="token punctuation">,</span>\n}'},["code",'const resolve=require("path").resolve;\nconst isDev = process.env.BUILD_ENV;\nlet devtool = isDev !== \'production\' ? "source-map" : "";\n// \u9879\u76ee\u7248\u672c\u914d\u7f6e\u6587\u4ef6\nconst productVersion = process.env.PRODUCT_VER;\nlet verConfigSrc;\nif (productVersion) {\n\tverConfigSrc = "./src/config/versionConfig/"+productVersion;\n} else {\n\tverConfigSrc = "./src/config/versionConfig/defaultVerConfig";\n}\nexport default {\n  history:"hash",\n  publicPath:\'./\',\n  theme: resolve(__dirname, \'./theme.config.js\'),\n  proxy: {\n    \'/api/\': {\n\t\t\ttarget: \'http://172.18.169.19:8280/\',\n\t\t\tpathRewrite: {\n\t\t\t\t\'/api/\': \'/member/api/\'\n\t\t\t},\n\t\t\tchangeOrigin: true, // for vhosted sites, changes host header to match to target\'s host\n\t\t\tlogLevel: \'debug\'\n\t\t}\n  },\n  devtool: devtool,\n  alias: {\n    verConfig: resolve(__dirname, verConfigSrc),\n    themes: resolve(__dirname, \'./src/themes\'),\n    layouts: resolve(__dirname, \'src/layouts\'),\n    assest: resolve(__dirname, \'src/assest\'),\n    common: resolve(__dirname, \'src/common\'),\n    components: resolve(__dirname, "./src/components"),\n    utils: resolve(__dirname, "./src/utils"),\n    services: resolve(__dirname, "./src/services"),\n    models: resolve(__dirname, "./src/models"),\n    config:resolve(__dirname, "./src/config"),\n    pages:resolve(__dirname, "./src/pages"),\n    \'sc-component\': resolve(__dirname, "./src/components"),\n    \'sc-util\': resolve(__dirname, "./src/utils"),\n  },\n  extraBabelPlugins: [\n    [\n      require.resolve("babel-plugin-import"),\n      {\n        "libraryName": "antd-mobile",\n        "libraryDirectory": "es",\n        "style": true\n      }\n    ]\n  ],\n  plugins: [\n    [\n      \'umi-plugin-react\',\n      {\n        dynamicImport: {\n          loadingComponent: "./components/PageLoading/index",\n          webpackChunkName: true\n        },\n        dva: {\n          hmr: true,\n        },\n        antd:true,\n        routes: {\n          exclude: [\n            /model\\.(j|t)sx?$/,\n            /services\\.(j|t)sx?$/,\n            /service\\.(j|t)sx?$/,\n            /models\\//,\n            /style\\//,\n            /components\\//,\n            /services\\//,\n            /chart\\/Container\\.js$/,\n          ],\n        },\n        locale: {\n          // default false\n          enable: true,\n          // default zh-CN\n          default: \'zh-CN\',\n          // default true, when it is true, will use `navigator.language` overwrite default\n          baseNavigator: true,\n        },\n      }\n    ],\n    /*    [\n          \'umi-plugin-dll\',\n          {\n            exclude: [\'model\'],\n            include: ["dva", "dva/router", "dva/saga", "dva/fetch", "antd/es", "sc-dva-antd-pro/es"],\n          },\n        ],*/\n  ],\n  chainWebpack: config => {\n    config.module.noParse(/coordinate-conver/) //\u4e0d\u53bb\u89e3\u6790/coordinate-conver/\u4e2d\u7684\u4f9d\u8d56\u5e93\n  },\n}']]],meta:{title:"umi\u914d\u7f6e",publishDate:"2020-01-17T00:00:00.000Z",abstract:"umi\u914d\u7f6e",filename:"posts/\u6280\u672f\u5206\u7c7b/webpack/umi\u914d\u7f6e.md"}}}});