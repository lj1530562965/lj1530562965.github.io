webpackJsonp([54],{475:function(n,s){n.exports={content:["article",["h3","sdk\u8c03\u7528\u5c01\u88c5"],["pre",{lang:null,highlighted:'export function <span class="token function">sdkApi</span><span class="token punctuation">(</span>apiName<span class="token punctuation">,</span>option<span class="token punctuation">)</span> {\n    let sdkApiCfg <span class="token operator">=</span> {\n        scan<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span>{}<span class="token punctuation">,</span>\n        getTicket<span class="token punctuation">:</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span>{}<span class="token punctuation">,</span>\n        loginapp<span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span>{}<span class="token punctuation">,</span>\n    }\n    <span class="token function">if</span><span class="token punctuation">(</span>window<span class="token punctuation">.</span>lightAppJssdk <span class="token operator">&amp;</span><span class="token operator">&amp;</span> window<span class="token punctuation">.</span>lightAppJssdk<span class="token punctuation">.</span>device<span class="token punctuation">)</span>{\n        sdkApiCfg <span class="token operator">=</span> {\n            scan<span class="token punctuation">:</span>window<span class="token punctuation">.</span>lightAppJssdk<span class="token punctuation">.</span>device<span class="token punctuation">.</span>scan<span class="token punctuation">,</span>\n            getTicket<span class="token punctuation">:</span>window<span class="token punctuation">.</span>lightAppJssdk<span class="token punctuation">.</span>user<span class="token punctuation">.</span>getTicket<span class="token punctuation">,</span>\n            loginapp<span class="token punctuation">:</span> window<span class="token punctuation">.</span>lightAppJssdk<span class="token punctuation">.</span>user<span class="token punctuation">.</span>loginapp<span class="token punctuation">,</span>\n        } \n    }\n    return new <span class="token function">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span>resolve<span class="token punctuation">,</span> reject<span class="token punctuation">)</span> <span class="token operator">=</span><span class="token operator">></span> {\n        let API <span class="token operator">=</span> sdkApiCfg<span class="token punctuation">[</span>apiName<span class="token punctuation">]</span><span class="token comment" spellcheck="true">;</span>\n        <span class="token function">if</span><span class="token punctuation">(</span>API<span class="token punctuation">)</span>{\n            <span class="token function">API</span><span class="token punctuation">(</span>{\n                <span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span>option<span class="token punctuation">,</span>\n                success<span class="token punctuation">:</span> function <span class="token punctuation">(</span>data<span class="token punctuation">)</span> {\n                    <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>\n                }<span class="token punctuation">,</span>\n                fail<span class="token punctuation">:</span> function <span class="token punctuation">(</span>data<span class="token punctuation">)</span> {\n                    <span class="token function">reject</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>\n                }<span class="token punctuation">,</span>\n            }<span class="token punctuation">)</span>\n        }\n    }<span class="token punctuation">)</span>\n}\n\n                <span class="token function">sdkApi</span><span class="token punctuation">(</span><span class="token string">\'loginapp\'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span>logindata<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span>{\n                    that<span class="token punctuation">.</span><span class="token function">userLogin</span><span class="token punctuation">(</span>logindata<span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>\n                }<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token operator">=</span><span class="token operator">></span>{\n                    Toast<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token string">\'\u767b\u5f55\u5931\u8d25\'</span><span class="token punctuation">)</span><span class="token comment" spellcheck="true">;</span>\n                }<span class="token punctuation">)</span>'},["code","export function sdkApi(apiName,option) {\n    let sdkApiCfg = {\n        scan:()=>{},\n        getTicket:()=>{},\n        loginapp: ()=>{},\n    }\n    if(window.lightAppJssdk && window.lightAppJssdk.device){\n        sdkApiCfg = {\n            scan:window.lightAppJssdk.device.scan,\n            getTicket:window.lightAppJssdk.user.getTicket,\n            loginapp: window.lightAppJssdk.user.loginapp,\n        } \n    }\n    return new Promise((resolve, reject) => {\n        let API = sdkApiCfg[apiName];\n        if(API){\n            API({\n                ...option,\n                success: function (data) {\n                    resolve(data);\n                },\n                fail: function (data) {\n                    reject(data);\n                },\n            })\n        }\n    })\n}\n\n                sdkApi('loginapp').then((logindata)=>{\n                    that.userLogin(logindata);\n                }).catch((e)=>{\n                    Toast.info('\u767b\u5f55\u5931\u8d25');\n                })"]]],meta:{title:"sdk\u8c03\u7528\u5c01\u88c5",publishDate:"2019-07-29T00:00:00.000Z",abstract:"sdk\u8c03\u7528\u5c01\u88c5",filename:"posts/\u6280\u672f\u5206\u7c7b/javascript/sdk\u8c03\u7528\u5c01\u88c5.md"}}}});